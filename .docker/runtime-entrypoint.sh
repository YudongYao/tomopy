#!/bin/bash -l

set -e

#------------------------------------------------------------------------------#
#   environment
#------------------------------------------------------------------------------#
export PATH=/opt/conda/bin:${PATH}

#------------------------------------------------------------------------------#

if [ -d /etc/profile.d ]; then
    for i in /etc/profile.d/*.sh
    do
        if [ -f ${i} ]; then source ${i}; fi
    done
fi

#------------------------------------------------------------------------------#

if [ -d /etc/bashrc.d ]; then
    for i in /etc/bashrc.d/*.sh
    do
        if [ -f ${i} ]; then source ${i}; fi
    done
fi

#------------------------------------------------------------------------------#
#   tomopy
#------------------------------------------------------------------------------#
if [ ! -d /home/tomopy ]; then
    git clone https://github.com/jrmadsen/tomopy.git /home/tomopy
fi

#------------------------------------------------------------------------------#
#   command
#------------------------------------------------------------------------------#
if [ -z "${1}" ]; then
    exec /bin/bash
fi

eval $@
